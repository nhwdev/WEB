<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¸ì ì¡ê¸° ê²Œì„</title>
</head>

<body>
    <script>
        function nextRandomInteger(limit) {
            return Math.round(Math.random() * limit) // 0 ~ limit ê¹Œì§€ì˜ ì„ì˜ì˜ ìˆ˜ ë¦¬í„´
        }
        function randomSpeed(maxSpeed) { // 2 : -2 ~ 2
            return Math.random() * maxSpeed - Math.random() * maxSpeed
        }
        const canvasWidth = 300
        const canvasHeight = 200
        let total = 15
        function MovingText() { // ìƒì„±ì í•¨ìˆ˜
            // í˜ì´ì§€ì—ì„œ ğŸ˜œì˜ ìœ„ì¹˜
            this.x = nextRandomInteger(canvasWidth) // 0 ~ 700 ì‚¬ì´ì˜ ì„ì˜ì˜ ìˆ˜
            this.y = nextRandomInteger(canvasHeight) // 0 ~ 500 ì‚¬ì´ì˜ ì„ì˜ì˜ ìˆ˜
            // vX: ê°€ë¡œì´ë™, vY: ì„¸ë¡œì´ë™
            this.vX = randomSpeed(7)
            this.vY = randomSpeed(7)
            this.body = document.createElement("h1") // <h1></h1>
            this.body.innerHTML = 'ğŸ˜œ' // <h1>ğŸ˜œ</h1>
            // <h1 style='background-color:white'>ğŸ˜œ</h1>
            this.body.setAttribute("style", "background-color:white")
            // <h1 style='background-color:white; position:absolute'>ğŸ˜œ</h1>
            this.body.style.position = "absolute"
            let text = this.body
            this.body.onclick = function () {
                if (text.innerHTML == 'ğŸ˜¢') return // í´ë¦­ì‹œ return : ì•„ë¬´ëŸ° ê¸°ëŠ¥ë„ ì•ˆí•¨
                // text.innerHTML == 'ğŸ˜œ' ì¸ ê²½ìš°ë§Œ ì‹¤í–‰ë¨
                --total // ğŸ˜œì˜ ê°¯ìˆ˜ë¥¼ ë¹¼ê¸°.
                alert(`ë‚¨ì€ ë¬¸ì ìˆ˜ : ${total}`)
                text.innerHTML = 'ğŸ˜¢'
            }
            document.body.appendChild(this.body)
        }
        // MovingText í´ë˜ìŠ¤ì˜ move í•¨ìˆ˜ ì •ì˜
        MovingText.prototype.move = function () {
            // this.body : h1 íƒœê·¸
            if (this.body.innerHTML == 'ğŸ˜¢') return // move ë˜ì§€ ì•ŠìŒ
            // this.body.innerHTML == 'ğŸ˜œ'ì¸ ê²½ìš°ë§Œ ì‹¤í–‰
            if (this.x < 0 || this.x > canvasWidth) { // 0 ~ canvasWidth ê¹Œì§€ ìœ ì§€
                this.vX *= -1 // ë¶€í˜¸ë¥¼ ë³€ê²½
            }
            if (this.y < 0 || this.y > canvasHeight) { // 0 ~ canvasHeight ê¹Œì§€ ìœ ì§€
                this.vY *= -1 // ë¶€í˜¸ë¥¼ ë³€ê²½
            }
            this.x += this.vX // ìœ„ì¹˜ ë³€ê²½. vXë§Œí¼
            this.y += this.vY // ìœ„ì¹˜ ë³€ê²½. vYë§Œí‹ˆ
            // < h1 style = 'background-color:white; positon:absolute; left:3px;top:50px' >ğŸ˜œ</h1 >
            this.body.style.left = this.x + "px"
            this.body.style.top = this.y + "px"
        }
        // window.onload : í™”ë©´ì´ ì¤€ë¹„ë˜ë©´
        onload = function () {
            let movingTexts = [] // ë°°ì—´
            for (let i = 0; i < total; i++) { // 10ë²ˆ ë°˜ë³µ
                movingTexts.push(new MovingText()) // ë°°ì—´ì— ì¶”ê°€
            }
            let game = setInterval(() => { // 1ì´ˆì— 60ë²ˆ í•¨ìˆ˜ ì‹¤í–‰, ì½œë°± í•¨ìˆ˜
                // movingTexts : 10ê°œì˜ MovingText ê°ì²´ë¥¼ ì €ì¥
                for (let i in movingTexts) {
                    if (total < 4) {
                        alert("ê²Œì„ì¢…ë£Œ")
                        clearInterval(game) // setInterval í•¨ìˆ˜ ì •ì§€
                        return // í•¨ìˆ˜ ì¢…ë£Œ
                    }
                    movingTexts[i].move() // 1ì´ˆì— 60ë²ˆ move() í•¨ìˆ˜ í˜¸ì¶œ
                }
            }, 1000 / 60)
        }
    </script>
</body>

</html>